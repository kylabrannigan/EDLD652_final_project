knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv"))
View(crash)
#select measures of interest from smart_location
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK,
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
crash <- crash %>%
select(STATENAME, RUR_URBNAME, HARM_EVNAME, FATALS)
knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
df$CBSA_Name <- gsub(",.*$", "", df$full_name)
knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv")) #crash data
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK,
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
df$CBSA_Name <- gsub(",.*$", "", df$full_name)
walkability$New <- gsub(",.*$", "", walkabilityf$CBSA_Name)
walkability$New <- gsub(",.*$", "", walkability$CBSA_Name)
View(walkability)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv")) #crash data
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK,
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name)
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name)
crash <- crash %>%
select(STATENAME, RUR_URBNAME, HARM_EVNAME, FATALS)
View(walkability)
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd) %>%
group_by(City, NatWalkInd) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(City, NatWalkInd) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, y = NatWalkInd))+
geom_point()
car_rates_plot
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(City, NatWalkInd) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, y = NatWalkInd))+
geom_bar()
car_rates_plot
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(City, NatWalkInd) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, fill = City))+
geom_bar()
car_rates_plot
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, fill = State))+
geom_bar()
car_rates_plot
walkability <- walkability %>% # filter df to only include data from 50 states
filter(State == "TX" | "PA")
walkability <- walkability %>% # filter df to only include data from 50 states
filter(State == "TX" | State == "PA")
walkability <- walkability %>% # filter df to only include data from 50 states
filter(State == "TX" | State == "PA")
walkability <- walkability %>% # filter df to only include data from 50 states
filter(State == "TX" , State == "PA")
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
walkability <- walkability %>% # filter df to only include data from 50 states
filter(State == "TX" , State == "PA")
walkability <- walkability %>% # filter df to only include data from 50 states
select(State == "TX" , State == "PA")
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
walkability <- walkability %>% # filter df to only include data from 50 states
select(State == "TX" , State == "PA")
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability <- walkability %>% # filter df to only include data from 50 states
select(walkability$State == "TX" , walkability$State == "PA")
states_list <- ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]
states_list <- [ "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY" ]
states_list <-"AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"
states_list <- 'AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"
states_list <-['AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]
states_list <- ['AL', 'AN', 'AB'] #['AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]
states_list <- ['AL', 'AN', 'AB'] #['AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]
states_list <- c('AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
# Walkability Data Cleaning
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
states_list <- c('AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
# Walkability Data Cleaning
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c('AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
# Walkability Data Cleaning
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c('AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
#select measures of interest from smart_location and crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
# Walkability Data Cleaning
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c('AL', "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
View(walkability)
states_list <- c("TX","AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
View(walkability)
walkability <- walkability[walkability$State %in% states_list, ]
View(walkability)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability <- walkability[walkability$State %in% states_list, ]
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("TX","AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
walkability <- walkability[walkability$State %in% states_list, ]
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
meow <- c(AL, AK)
walkability <- walkability %>%
select(State %in% states_list)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
select(State %in% states_list)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
select(State %in% states_list)
walkability <- walkability %>%
select(State %in% states_list)
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv")) #crash data
# Walkability Data Cleaning
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
#walkability <- walkability %>%
#  select(State %in% states_list)
# Crash Data Filtering
crash <- crash %>%
select(STATENAME, RUR_URBNAME, HARM_EVNAME, FATALS)
View(walkability)
walkability <- walkability %>%
select(State %in% states_list)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
select(State %in% states_list)
View(walkability)
walkability <- walkability %>%
filter(State %in% states_list)
walkability <- walkability %>%
filter(walkability$State %in% states_list)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
mutate(is_state = State %in% states_list)
View(walkability)
sum(walkability$is_state == TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv")) #crash data
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?,\\s*", "", walkability$CBSA_Name) # make new col that indicates state
unique(walkability$State)
View(walkability)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?, \\s*", "", walkability$CBSA_Name) # make new col that indicates state
unique(walkability$State)
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
library(rio)
library(here)
library(tidyverse)
condition1<- import(here("condition1.xlsx"))
library(rio)
library(here)
library(tidyverse)
condition1<- import(here("condition1.xlsx"))
knitr::opts_chunk$set(echo = TRUE)
library(rio)
library(tidyverse)
library(here)
smart_location <- import(here("data", "EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv")) #smart location database and walkability index
crash <- import(here("FARS2019NationalCSV", "accident.csv")) #crash data
# Walkability Data Cleaning
walkability <- smart_location %>%
select(CBSA, CBSA_Name, CBSA_POP, CBSA_EMP, CBSA_WRK, # select col of interest
TotPop, AutoOwn0, AutoOwn1, AutoOwn2p,
NatWalkInd,
TotEmp, E5_Ret, E5_Off, E5_Ind, E5_Svc, E5_Ent,
E_LowWageWk, E_MedWageWk, E_HiWageWk)
walkability$City <- gsub(",.*$", "", walkability$CBSA_Name) # make new col that indicates city
walkability$State <- sub("^.*?, \\s*", "", walkability$CBSA_Name) # make new col that indicates state
states_list <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN","TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY")
walkability <- walkability %>%
filter(State %in% states_list)
# Crash Data Filtering
crash <- crash %>%
select(STATENAME, RUR_URBNAME, HARM_EVNAME, FATALS)
View(walkability)
walkability <- walkability %>%
filter(State %in% states_list)
View(walkability)
# Crash Data Filtering
crash <- crash %>%
select(STATENAME, RUR_URBNAME, HARM_EVNAME, FATALS)
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(City, NatWalkInd) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, fill = State))+
geom_bar()
car_rates_plot
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(State) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
car_rates_plot <- car_rates %>%
ggplot(aes(x = car, fill = State))+
geom_bar()
car_rates_plot
View(walkability)
car_rates <- walkability %>%
select(CBSA, CBSA_Name, AutoOwn0, AutoOwn1, AutoOwn2p,NatWalkInd, City, State) %>%
group_by(State) %>%
mutate(car = sum(AutoOwn1+AutoOwn2p))
car_rates$car <- as.factor(car_rates$car)
meow <- car_rates %>%
ggplot(aes(x = NatWalkInd))+
geom_histogram()
car_rates_plot
meow
